<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>LUA API | GameAI.win</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" type="image/png" size="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <meta name="description" content="GameAI.win is a collection of tools what will help you play game more enjoyably">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="apple-mobile-web-app-title" content="GameAI.win">
    <meta name="application-name" content="GameAI.win">
    <meta name="msapplication-TileColor" content="#da532c">
    
    <link rel="preload" href="/assets/css/0.styles.7bb3cdfd.css" as="style"><link rel="preload" href="/assets/js/app.9b5e1b41.js" as="script"><link rel="preload" href="/assets/js/3.31c59f86.js" as="script"><link rel="preload" href="/assets/js/6.d38266fe.js" as="script"><link rel="preload" href="/assets/js/12.3daffb5c.js" as="script"><link rel="prefetch" href="/assets/js/10.8dec2686.js"><link rel="prefetch" href="/assets/js/11.115082b5.js"><link rel="prefetch" href="/assets/js/13.086f814b.js"><link rel="prefetch" href="/assets/js/14.e3272c28.js"><link rel="prefetch" href="/assets/js/15.7fc7ed2a.js"><link rel="prefetch" href="/assets/js/16.f280ead7.js"><link rel="prefetch" href="/assets/js/17.e82ec0be.js"><link rel="prefetch" href="/assets/js/18.58f0e90e.js"><link rel="prefetch" href="/assets/js/19.6c432081.js"><link rel="prefetch" href="/assets/js/20.066ad05d.js"><link rel="prefetch" href="/assets/js/21.5902e715.js"><link rel="prefetch" href="/assets/js/22.00940581.js"><link rel="prefetch" href="/assets/js/23.35f8f227.js"><link rel="prefetch" href="/assets/js/24.938814cb.js"><link rel="prefetch" href="/assets/js/25.d61245d0.js"><link rel="prefetch" href="/assets/js/26.c1e01ef1.js"><link rel="prefetch" href="/assets/js/27.f6b4b25a.js"><link rel="prefetch" href="/assets/js/28.52518340.js"><link rel="prefetch" href="/assets/js/29.f5cd8d24.js"><link rel="prefetch" href="/assets/js/4.8c65c393.js"><link rel="prefetch" href="/assets/js/5.ea4ca44a.js"><link rel="prefetch" href="/assets/js/7.d0320442.js"><link rel="prefetch" href="/assets/js/8.9bf02a95.js"><link rel="prefetch" href="/assets/js/9.5f1e60bb.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.ca16f66c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7bb3cdfd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/home.png" alt="GameAI.win" class="logo"> <span class="site-name can-hide">GameAI.win</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en_US/guide/start.html" class="nav-link">
  Quick Start
</a></div><div class="nav-item"><a href="/en_US/developer/base.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Script
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh_TW/" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/en_US/developer/base.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <a href="https://github.com/gameai-win" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/en_US/guide/start.html" class="nav-link">
  Quick Start
</a></div><div class="nav-item"><a href="/en_US/developer/base.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Script
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh_TW/" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/en_US/developer/base.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <a href="https://github.com/gameai-win" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>LUA API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en_US/developer/base.html#base-library" class="sidebar-link">Base library</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/en_US/developer/base.html#host-library" class="sidebar-link">Host library</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/en_US/developer/base.html#basic-introduction" class="sidebar-link">Basic introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en_US/developer/base.html#scripting-infrastructure" class="sidebar-link">Scripting infrastructure</a></li><li class="sidebar-sub-header"><a href="/en_US/developer/base.html#global-variables" class="sidebar-link">Global variables</a></li></ul></li><li><a href="/en_US/developer/base.html#global-function" class="sidebar-link">Global function</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en_US/developer/base.html#print" class="sidebar-link">print</a></li><li class="sidebar-sub-header"><a href="/en_US/developer/base.html#wait" class="sidebar-link">wait</a></li><li class="sidebar-sub-header"><a href="/en_US/developer/base.html#sleep" class="sidebar-link">sleep</a></li><li class="sidebar-sub-header"><a href="/en_US/developer/base.html#load-module" class="sidebar-link">load_module</a></li></ul></li><li><a href="/en_US/developer/base.html#op" class="sidebar-link">op</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en_US/developer/base.html#ver" class="sidebar-link">Ver</a></li><li class="sidebar-sub-header"><a href="/en_US/developer/base.html#setpath" class="sidebar-link">SetPath</a></li><li class="sidebar-sub-header"><a href="/en_US/developer/base.html#findpic" class="sidebar-link">FindPic</a></li><li class="sidebar-sub-header"><a href="/en_US/developer/base.html#capture" class="sidebar-link">Capture</a></li><li class="sidebar-sub-header"><a href="/en_US/developer/base.html#setshowerrormsg" class="sidebar-link">SetShowErrorMsg</a></li></ul></li><li><a href="/en_US/developer/base.html#game" class="sidebar-link">game</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en_US/developer/base.html#loadres" class="sidebar-link">LoadRes</a></li></ul></li><li><a href="/en_US/developer/base.html#host-function" class="sidebar-link">Host function</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en_US/developer/base.html#xbox" class="sidebar-link">XBOX</a></li><li class="sidebar-sub-header"><a href="/en_US/developer/base.html#playstation" class="sidebar-link">PlayStation</a></li><li class="sidebar-sub-header"><a href="/en_US/developer/base.html#switch" class="sidebar-link">Switch</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="lua-api"><a href="#lua-api" class="header-anchor">#</a> LUA API</h1> <ul><li>The system is implemented using <a href="https://www.lua.org/manual/5.4/manual.html" target="_blank" rel="noopener noreferrer">Lua5.4<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>Supports most native lua functions (except for a few dangerous APIs)</li> <li>Can support two file types compiled <code>.psr</code> and <code>.lua</code></li> <li>The compiled <code>.psr</code> is the downloaded finished script, which contains <code>protected</code>lua and res<code>resources</code>, which cannot be changed</li> <li><code>.lua</code> script is written by yourself and can be changed</li> <li>After the <code>.lua</code> script is written, you can choose to use tools to compile it as a <code>.psr</code> file and publish it</li></ul> <h2 id="base-library"><a href="#base-library" class="header-anchor">#</a> Base library</h2> <ul><li><a href="#op">op</a> provides color recognition function</li> <li><a href="#game">game</a> provides host operation function</li></ul> <h2 id="host-library"><a href="#host-library" class="header-anchor">#</a> Host library</h2> <ul><li><a href="/en_US/developer/xbox.html">xbox</a></li> <li><a href="/en_US/developer/playstation.html">playstation</a></li></ul> <h2 id="basic-introduction"><a href="#basic-introduction" class="header-anchor">#</a> Basic introduction</h2> <h3 id="scripting-infrastructure"><a href="#scripting-infrastructure" class="header-anchor">#</a> Scripting infrastructure</h3> <ul><li>The script consists of several LUA files and res directory</li> <li>The script must contain a <code>main</code> function</li> <li><div class="language-lua extra-class"><pre class="language-lua"><code>    <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span>  
    <span class="token keyword">end</span>  
</code></pre></div><div class="language-lua extra-class"><pre class="language-lua"><code>    <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span>  
    <span class="token keyword">end</span>  
</code></pre></div>When the script engine starts, it will automatically call the <code>main</code> function in the script to start running<br>
A minimal script:</li> <div class="language-lua extra-class"><pre class="language-lua"><code>    <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span>  
    <span class="token keyword">end</span>  
</code></pre></div></ul> <div class="language-lua extra-class"><pre class="language-lua"><code>    <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span>  
    <span class="token keyword">end</span>  
</code></pre></div><h3 id="global-variables"><a href="#global-variables" class="header-anchor">#</a> Global variables</h3> <div class="language-lua extra-class"><pre class="language-lua"><code>  _APP_VERSION <span class="token comment">-- system version number  </span>
  _PATH <span class="token comment">-- the directory where the current script is located  </span>
  _FILENAME <span class="token comment">-- the filename of the currently running script (entry file)  </span>
</code></pre></div><div class="language-lua extra-class"><pre class="language-lua"><code>  _APP_VERSION <span class="token comment">-- system version number  </span>
  _PATH <span class="token comment">-- the directory where the current script is located  </span>
  _FILENAME <span class="token comment">-- the filename of the currently running script (entry file)  </span>
</code></pre></div><p>All variables starting with an underscore are system variables and cannot be modified</p> <div class="language-lua extra-class"><pre class="language-lua"><code>  _APP_VERSION <span class="token comment">-- system version number  </span>
  _PATH <span class="token comment">-- the directory where the current script is located  </span>
  _FILENAME <span class="token comment">-- the filename of the currently running script (entry file)  </span>
</code></pre></div><h2 id="global-function"><a href="#global-function" class="header-anchor">#</a> Global function</h2> <h3 id="print"><a href="#print" class="header-anchor">#</a> print</h3> <h4 id="function-introduction"><a href="#function-introduction" class="header-anchor">#</a> Function introduction:</h4> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
</code></pre></div><div class="language-lua extra-class"><pre class="language-lua"><code><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
</code></pre></div><p>Display information</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
</code></pre></div><h3 id="wait"><a href="#wait" class="header-anchor">#</a> wait</h3> <h4 id="function-introduction-2"><a href="#function-introduction-2" class="header-anchor">#</a> Function introduction:</h4> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
<span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">-- wait for one second  </span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
<span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span> <span class="token comment">-- wait 0.2 seconds  </span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
</code></pre></div><div class="language-lua extra-class"><pre class="language-lua"><code><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
<span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">-- wait for one second  </span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
<span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span> <span class="token comment">-- wait 0.2 seconds  </span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
</code></pre></div><p>Make the script wait for a certain amount of time before running down</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
<span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">-- wait for one second  </span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
<span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">)</span> <span class="token comment">-- wait 0.2 seconds  </span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
</code></pre></div><h3 id="sleep"><a href="#sleep" class="header-anchor">#</a> sleep</h3> <h4 id="function-introduction-3"><a href="#function-introduction-3" class="header-anchor">#</a> Function introduction:</h4> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
<span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span> <span class="token comment">-- wait for one second  </span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
<span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token comment">-- wait 0.2 seconds  </span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
</code></pre></div><div class="language-lua extra-class"><pre class="language-lua"><code><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
<span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span> <span class="token comment">-- wait for one second  </span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
<span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token comment">-- wait 0.2 seconds  </span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
</code></pre></div><p>Let the script wait for a certain amount of time before running down, the same as the function above, but the parameter is milliseconds</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
<span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span> <span class="token comment">-- wait for one second  </span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
<span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token comment">-- wait 0.2 seconds  </span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>  
</code></pre></div><h3 id="load-module"><a href="#load-module" class="header-anchor">#</a> load_module</h3> <h4 id="load-a-module"><a href="#load-a-module" class="header-anchor">#</a> Load a module</h4> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token keyword">local</span> ret <span class="token operator">=</span> <span class="token function">load_module</span><span class="token punctuation">(</span> _PATH  <span class="token operator">..</span> <span class="token string">&quot;base.psr&quot;</span><span class="token punctuation">,</span>_ENV<span class="token punctuation">)</span>  
<span class="token keyword">if</span> ret <span class="token keyword">then</span>  
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;load module success&quot;</span><span class="token punctuation">)</span>  
<span class="token keyword">else</span>  
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;load module failed&quot;</span><span class="token punctuation">)</span>  
<span class="token keyword">end</span>  
</code></pre></div><div class="language-lua extra-class"><pre class="language-lua"><code><span class="token keyword">local</span> ret <span class="token operator">=</span> <span class="token function">load_module</span><span class="token punctuation">(</span> _PATH  <span class="token operator">..</span> <span class="token string">&quot;base.psr&quot;</span><span class="token punctuation">,</span>_ENV<span class="token punctuation">)</span>  
<span class="token keyword">if</span> ret <span class="token keyword">then</span>  
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;load module success&quot;</span><span class="token punctuation">)</span>  
<span class="token keyword">else</span>  
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;load module failed&quot;</span><span class="token punctuation">)</span>  
<span class="token keyword">end</span>  
</code></pre></div><p>Load a three-party library from the script directory. Once successfully loaded, you can use the functions provided by the three-party library</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token keyword">local</span> ret <span class="token operator">=</span> <span class="token function">load_module</span><span class="token punctuation">(</span> _PATH  <span class="token operator">..</span> <span class="token string">&quot;base.psr&quot;</span><span class="token punctuation">,</span>_ENV<span class="token punctuation">)</span>  
<span class="token keyword">if</span> ret <span class="token keyword">then</span>  
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;load module success&quot;</span><span class="token punctuation">)</span>  
<span class="token keyword">else</span>  
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;load module failed&quot;</span><span class="token punctuation">)</span>  
<span class="token keyword">end</span>  
</code></pre></div><hr> <h2 id="op"><a href="#op" class="header-anchor">#</a> op</h2> <h3 id="ver"><a href="#ver" class="header-anchor">#</a> Ver</h3> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token function">print</span><span class="token punctuation">(</span> op<span class="token punctuation">.</span><span class="token function">Ver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>  
</code></pre></div><div class="language-lua extra-class"><pre class="language-lua"><code><span class="token function">print</span><span class="token punctuation">(</span> op<span class="token punctuation">.</span><span class="token function">Ver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>  
</code></pre></div><p>Returns the version number of the current op</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token function">print</span><span class="token punctuation">(</span> op<span class="token punctuation">.</span><span class="token function">Ver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>  
</code></pre></div><h3 id="setpath"><a href="#setpath" class="header-anchor">#</a> SetPath</h3> <div class="language-lua extra-class"><pre class="language-lua"><code>op<span class="token punctuation">.</span><span class="token function">SetPath</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\test\\res&quot;</span><span class="token punctuation">)</span>  
</code></pre></div><div class="language-lua extra-class"><pre class="language-lua"><code>op<span class="token punctuation">.</span><span class="token function">SetPath</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\test\\res&quot;</span><span class="token punctuation">)</span>  
</code></pre></div><p>Set the global path. After this path is set, in all interface calls, related files are relative to this path. For example, pictures, fonts, etc.</p> <div class="language-lua extra-class"><pre class="language-lua"><code>op<span class="token punctuation">.</span><span class="token function">SetPath</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\test\\res&quot;</span><span class="token punctuation">)</span>  
</code></pre></div><h3 id="findpic"><a href="#findpic" class="header-anchor">#</a> FindPic</h3> <h4 id="function-introduction-4"><a href="#function-introduction-4" class="header-anchor">#</a> Function introduction:</h4> <p>Find the picture in the specified area. The bitmap must be in 24-bit color format and support transparent color. When the color of the 4 vertices on the top, bottom, left, and right of the image is the same, this color will be treated as a   transparent color.</p> <p>This function can look up multiple images and only returns the X Y coordinates of the first found.</p> <h4 id="function-prototype"><a href="#function-prototype" class="header-anchor">#</a> Function prototype:</h4> <div class="language-vb extra-class"><pre class="language-vb"><code><span class="token keyword">long</span> FindPic<span class="token punctuation">(</span>x1<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> y2<span class="token punctuation">,</span> pic_name<span class="token punctuation">,</span> delta_color<span class="token punctuation">,</span>sim<span class="token punctuation">,</span> dir<span class="token punctuation">,</span>intX<span class="token punctuation">,</span> intY<span class="token punctuation">)</span>  
</code></pre></div><h4 id="parameter-definition"><a href="#parameter-definition" class="header-anchor">#</a> Parameter definition:</h4> <blockquote><p>x1 integer: the upper left X coordinate of the area<br>
y1 integer: the upper left Y coordinate of the region<br>
x2 integer: the lower right X coordinate of the area<br>
y2 integer: the lower right Y coordinate of the region<br>
pic_name String: picture name, can be multiple pictures, such as &quot;test.bmp|test2.bmp|test3.bmp&quot;<br>
delta_color string: color shift such as &quot;203040&quot; indicates that the color shift of RGB is 20 30 40 (here is the hexadecimal representation)<br>
sim double-precision floating-point number: similarity, value range 0.1-1.0<br>
dir integer: search direction 0: left to right, top to bottom 1: left to right, bottom to top 2: right to left, top to bottom 3: right to left, bottom to superior<br>
intX variable parameter pointer: returns the X coordinate of the upper left corner of the picture<br>
intY variable parameter pointer: returns the Y coordinate of the upper left corner of the picture</p></blockquote> <h4 id="return-value"><a href="#return-value" class="header-anchor">#</a> return value:</h4> <p>Integer number:</p> <blockquote><p>Return the serial number of the found image, indexed from 0. If not found, return -1</p></blockquote> <h4 id="example"><a href="#example" class="header-anchor">#</a> Example:</h4> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token keyword">local</span> idx<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y <span class="token operator">=</span> op<span class="token punctuation">.</span><span class="token function">FindPic</span><span class="token punctuation">(</span><span class="token number">892</span><span class="token punctuation">,</span><span class="token number">52</span><span class="token punctuation">,</span><span class="token number">906</span><span class="token punctuation">,</span><span class="token number">64</span><span class="token punctuation">,</span><span class="token string">&quot;a.bmp&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;202020&quot;</span><span class="token punctuation">,</span><span class="token number">0.9</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>  
<span class="token keyword">if</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">==</span> idx <span class="token keyword">then</span>  
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Not found&quot;</span><span class="token punctuation">)</span>  
<span class="token keyword">else</span>  
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Found, the coordinates are &quot;</span><span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>  
<span class="token keyword">end</span>  
</code></pre></div><h3 id="capture"><a href="#capture" class="header-anchor">#</a> Capture</h3> <h4 id="function-introduction-5"><a href="#function-introduction-5" class="header-anchor">#</a> Function introduction:</h4> <p>Grab the image of the specified area (x1, y1, x2, y2) and save it as a file (24-bit bitmap)</p> <h4 id="function-prototype-2"><a href="#function-prototype-2" class="header-anchor">#</a> Function prototype:</h4> <div class="language-vb extra-class"><pre class="language-vb"><code><span class="token keyword">long</span> Capture<span class="token punctuation">(</span>x1<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> y2<span class="token punctuation">,</span> file<span class="token punctuation">)</span>  
</code></pre></div><h4 id="parameter-definition-2"><a href="#parameter-definition-2" class="header-anchor">#</a> Parameter definition:</h4> <blockquote><p>x1 integer: the upper left X coordinate of the area<br>
y1 integer: the upper left Y coordinate of the region<br>
x2 integer: the lower right X coordinate of the area<br>
y2 integer: the lower right Y coordinate of the region<br>
file String: The name of the file to be saved, the place to save is generally the directory set in SetPath, of course, the full path name can also be specified here.</p></blockquote> <h4 id="return-value-2"><a href="#return-value-2" class="header-anchor">#</a> return value:</h4> <blockquote><p>0: failed<br>
1: success</p></blockquote> <h4 id="example-2"><a href="#example-2" class="header-anchor">#</a> Example:</h4> <div class="language-lua extra-class"><pre class="language-lua"><code>ret <span class="token operator">=</span> op<span class="token punctuation">.</span><span class="token function">Capture</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token string">&quot;screen.bmp&quot;</span><span class="token punctuation">)</span>  
<span class="token keyword">if</span> <span class="token number">1</span> <span class="token operator">==</span> ret <span class="token keyword">then</span>  
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Successful screenshot&quot;</span><span class="token punctuation">)</span>  
<span class="token keyword">end</span>  
</code></pre></div><h3 id="setshowerrormsg"><a href="#setshowerrormsg" class="header-anchor">#</a> SetShowErrorMsg</h3> <h4 id="function-introduction-6"><a href="#function-introduction-6" class="header-anchor">#</a> Function introduction:</h4> <p>Set whether to pop up an error message, the default is open.</p> <h4 id="function-prototype-3"><a href="#function-prototype-3" class="header-anchor">#</a> Function prototype:</h4> <div class="language-vb extra-class"><pre class="language-vb"><code><span class="token keyword">long</span> SetShowErrorMsg<span class="token punctuation">(</span>show<span class="token punctuation">)</span>  
</code></pre></div><h4 id="parameter-definition-3"><a href="#parameter-definition-3" class="header-anchor">#</a> Parameter definition:</h4> <p>show 0 means not open, 1 means open, 2 means write error information to the file</p> <h4 id="return-value-3"><a href="#return-value-3" class="header-anchor">#</a> return value:</h4> <blockquote><p>0 : failed<br>
1 : success</p></blockquote> <h4 id="example-3"><a href="#example-3" class="header-anchor">#</a> Example:</h4> <div class="language-lua extra-class"><pre class="language-lua"><code>op_ret <span class="token operator">=</span> op<span class="token punctuation">.</span><span class="token function">SetShowErrorMsg</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>  
</code></pre></div><hr> <h2 id="game"><a href="#game" class="header-anchor">#</a> game</h2> <h3 id="loadres"><a href="#loadres" class="header-anchor">#</a> LoadRes</h3> <div class="language-lua extra-class"><pre class="language-lua"><code>    <span class="token comment">-- _PATH here is a system variable that specifies the directory where the script is currently running  </span>
    <span class="token comment">-- The parameters are path, format, _ENV (the current format and _ENV are fixed writing, just copy)  </span>
    <span class="token comment">-- Load the base.psr module in the current script directory  </span>
    game<span class="token punctuation">.</span><span class="token function">LoadRes</span><span class="token punctuation">(</span> _PATH <span class="token operator">..</span> <span class="token string">&quot;base.psr&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bt&quot;</span><span class="token punctuation">,</span>_ENV<span class="token punctuation">)</span>  
    <span class="token comment">-- After loading, you can call the function in base.psr  </span>
</code></pre></div><div class="language-lua extra-class"><pre class="language-lua"><code>    <span class="token comment">-- _PATH here is a system variable that specifies the directory where the script is currently running  </span>
    <span class="token comment">-- The parameters are path, format, _ENV (the current format and _ENV are fixed writing, just copy)  </span>
    <span class="token comment">-- Load the base.psr module in the current script directory  </span>
    game<span class="token punctuation">.</span><span class="token function">LoadRes</span><span class="token punctuation">(</span> _PATH <span class="token operator">..</span> <span class="token string">&quot;base.psr&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bt&quot;</span><span class="token punctuation">,</span>_ENV<span class="token punctuation">)</span>  
    <span class="token comment">-- After loading, you can call the function in base.psr  </span>
</code></pre></div><p>Load a script module, after loading, you can use the functions provided by the module</p> <div class="language-lua extra-class"><pre class="language-lua"><code>    <span class="token comment">-- _PATH here is a system variable that specifies the directory where the script is currently running  </span>
    <span class="token comment">-- The parameters are path, format, _ENV (the current format and _ENV are fixed writing, just copy)  </span>
    <span class="token comment">-- Load the base.psr module in the current script directory  </span>
    game<span class="token punctuation">.</span><span class="token function">LoadRes</span><span class="token punctuation">(</span> _PATH <span class="token operator">..</span> <span class="token string">&quot;base.psr&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bt&quot;</span><span class="token punctuation">,</span>_ENV<span class="token punctuation">)</span>  
    <span class="token comment">-- After loading, you can call the function in base.psr  </span>
</code></pre></div><h2 id="host-function"><a href="#host-function" class="header-anchor">#</a> Host function</h2> <p>Ok, the basic introduction is over, choose your host below, and start to introduce the special functions of different hosts</p> <h3 id="xbox"><a href="#xbox" class="header-anchor">#</a> <a href="xbox">XBOX</a></h3> <h3 id="playstation"><a href="#playstation" class="header-anchor">#</a> <a href="playstation">PlayStation</a></h3> <h3 id="switch"><a href="#switch" class="header-anchor">#</a> <a href="switch">Switch</a></h3></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/gameai-win/gameai-win.github.io.git/edit/master/docs/en_US/developer/base.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/10/2022, 1:53:30 PM</span></div></footer> <contributors></contributors> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.9b5e1b41.js" defer></script><script src="/assets/js/3.31c59f86.js" defer></script><script src="/assets/js/6.d38266fe.js" defer></script><script src="/assets/js/12.3daffb5c.js" defer></script>
  </body>
</html>
